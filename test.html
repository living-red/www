<!DOCTYPE html>
<html>
<head>
    <meta name="description" content="NIM TEST APP">
    <meta charset=utf-8 />
    <title>Nimiq Demo App</title>
        <script
  src="https://cdn.jsdelivr.net/npm/@nimiq/hub-api@v1.0/dist/standalone/HubApi.standalone.umd.js"
  integrity="sha256-HZuohwzM5nRdRQh3HLpAcYGbpNe6PtqZRyK+VvUI+nU=" crossorigin="anonymous"></script>

    <script type="text/javascript" src="https://cdn.nimiq.com/v1.5/nimiq.js"></script>
    <script>
        function status(text) {
            document.getElementById('message').textContent = text;
            console.log(`Status: ${text}`);
        }

        async function start() {
            status('Nimiq loaded. Establishing consensus...');

            // Config to use Nimiq Testnet - change to 'main()' for Mainnet.
            Nimiq.GenesisConfig.main();

            // the config builder will create the minimal necessary client for you.
            const configBuilder = Nimiq.Client.Configuration.builder();
            // Connect to mainnet
            const hubApi = new HubApi('https://hub.nimiq.com');

            // By not requesting any addition features, a Nimiq Pico Client instance will be created
            // E.g. to be able to mine, we can add a Mempool here: 'configBuilder.feature(Nimiq.Client.Feature.MEMPOOL);'

            // Create a client based on your configuration;
            // It will automatically connect to the network.
            const client = configBuilder.instantiateClient();
            const requestOptions = { appName: 'LivingRED', };

// All client requests are async and return a promise
const accounts = await hubApi.signup(requestOptions);
            // Waiting for consensus to be establish
            client.addConsensusChangedListener((consensus) => {
                const message = consensus === Nimiq.Client.ConsensusState.ESTABLISHED
                    ? 'Consensus established.'
                    : 'Establishing consensus...'

                // Update displayed status
                status(message);
            });
        };

        // Start loading the Nimiq client library
        Nimiq.init(start);
    </script>
</head>
<body>
    <h1>Nimiq Demo App</h1>
    <div id="message">loading...</div>
    <center>
        <div class="nomics-ticker-widget" data-name="Nimiq" data-base="NIM" data-quote="USD"></div><script src="https://widget.nomics.com/embed.js"></script>
    </center>
</body>
</html>
